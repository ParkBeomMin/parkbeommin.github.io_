---
title: '[DX] git actionsë¡œ ssh ì ‘ì†í•˜ì—¬ ìë™ ë°°í¬ í•˜ê¸°'
date: 2023-07-21 10:34:00+09:00
categories: dx git actions ssh ci/cd
---

<img src='/assets/dx/banner.png'>

> ë¡œì»¬ì—ì„œ ì‘ì—…í•˜ê³  í‘¸ì‰¬í•˜ê³   
> ë§ˆìŠ¤í„° ë¸Œëœì¹˜ë¡œ í•©ì¹˜ê³   
> ì„œë²„ì— ì ‘ì†í•´ì„œ ë¹Œë“œ&ë°°í¬ í•˜ê³ ...

ê°œë°œìëŠ” ê·€ì°®ìŒì´ ë§ì•„ì•¼ ì¢‹ì€ í™˜ê²½ë“¤ì„ ë§Œë“¤ì–´ ê°„ë‹¤ê³  í•©ë‹ˆë‹¤.  
ìœ„ì™€ ê°™ì€ ì‘ì—…ì´ ìŠ¬ìŠ¬ ê·€ì°®ì•„ì ¸ì„œ ìë™ ë°°í¬ë¥¼ ì ìš©í•´ì•¼ê² ë‹¤ ì‹¶ì—ˆìŠµë‹ˆë‹¤.  
goorm ideë¡œ ubuntu ì„œë²„ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê³  vue3ë¡œ ì œì‘ëœ ì›¹ í˜ì´ì§€ë¥¼ ìš´ì˜í•˜ëŠ” í™˜ê²½ì…ë‹ˆë‹¤.

## ğŸ”‘ë§ˆìŠ¤í„° ë¸Œëœì¹˜ì— ì½”ë“œê°€ ë³€ê²½ë˜ë©´ ë¹Œë“œ&ë°°í¬ê°€ ì‹¤í–‰ë˜ê²Œ í•  ìˆ˜ ì—†ì„ê¹Œ?

goorm ideì— jenkinsë¥¼ ì„¤ì¹˜í•´ì„œ ci/cdí™˜ê²½ì„ êµ¬ì¶•í•´ë³´ë ¤ í–ˆëŠ”ë° ì„¤ì¹˜ê°€ ì˜ ë˜ì§€ ì•Šì•„ ê·¸ëƒ¥ ê³„ì† ìˆ˜ë™ìœ¼ë¡œ ë¹Œë“œ&ë°°í¬ë¥¼ ì§„í–‰í•´ì™”ìŠµë‹ˆë‹¤.  
ìˆ˜ê°œì›”ê°„ ë°©ì¹˜í•˜ë‹¤ ë¬¸ë“ git actionsê°€ ë– ì˜¬ëìŠµë‹ˆë‹¤.  
git actionsë¡œ ë¸Œëœì¹˜ì— ì½”ë“œ ë³€í™” ê°ì§€ë¥¼ í•  ìˆ˜ ìˆê³  ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆê¸°ì— ssh ì ‘ê·¼ë„ ê°€ëŠ¥í•œì§€ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤.

> git actionsë¡œ ssh ì ‘ì†í•˜ì—¬ ë¹Œë“œ&ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰ì‹œí‚¤ê²Œ í•˜ë©´ ë˜ê² ë‹¤!

## ğŸ“ƒë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ë§Œë“¤ê¸°

```
#!/bin/bash

project() {
	cd /workspace/project
	git pull
	npm run build
	pm2 restart project
}

project
```

workspaceì˜ projectí´ë”ë¡œ ì´ë™í•œ í›„ git pullì„ ë°›ê³  ë¹Œë“œë¥¼ í•˜ê³  pm2ë¥¼ ì¬ì‹œì‘í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.  
cd ê²½ë¡œë¥¼ ì§€ì •í•  ë•Œ ìƒëŒ€ê²½ë¡œë¡œ ì§€ì •í•˜ê²Œ ë˜ë©´ ìˆ˜ë™ìœ¼ë¡œëŠ” ì˜ ë™ì‘í•˜ì§€ë§Œ, sshë¡œ ì ‘ê·¼ ì‹œì—ëŠ” ë‹¤ë¥´ê¸°ë•Œë¬¸ì— ì ˆëŒ€ê²½ë¡œë¡œ ì§€ì •í•´ì¤ë‹ˆë‹¤.

## ğŸ’»git actions ìŠ¤í¬ë¦½íŠ¸ ë§Œë“¤ê¸°

`.github/workflows/main.yml`

```
name: remote ssh command
on: [push]
jobs:

  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
    - name: executing remote ssh commands using password
      uses: appleboy/ssh-action@master
      with:
        host: -
        username: -
        password: -
        port: -
        script: /workspace/baepo.sh
```

github ë ˆí¬ì§€í† ë¦¬ë¡œ ì´ë™í•´ì„œ main.yml íŒŒì¼ì„ ìœ„ì™€ ê°™ì´ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.  
hostì™€ username, password, portë¥¼ ì˜ ì§€ì •í•´ì£¼ê³  ë¨¼ì € ë§Œë“¤ì–´ë†¨ë˜ baepo.shíŒŒì¼ì„ ì‹¤í–‰í•˜ë„ë¡ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.
